<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="NRL Pointer Maintenance">
<meta name="keywords" content="pointersfor_providersfor_consumers,  engage about">
<title>Pointer Maintenance | NRL</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="FHIR-NRLS-API" href="https://developer.nhs.uk/apis/nrl/feed.xml">





    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> NRL API | FHIR&reg;</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="Search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Pointer Maintenance">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                








<ul id="mysidebar" class="nav">

    <!-- <p style="font-size:2em;">-->

       <!-- <img src="images/interopen.png" height="48px" alt="INTEROpen Logo"/>
    INTEROPen</p>
    <p style="font-size:16px;">Supported by -->
    <img src="images/logo.png"   alt="NHS Digital Logo"/>
    <!--</p>-->


    <li class="sidebarTitle">NRL 2.3.0-beta API <i>specification</i></li>
    
    
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="index.html">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="overview_guide_versioning.html">Product Versioning</a></li>
            
            
            
            
            
            
            <li><a href="overview_release_notes.html">Release Notes</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Solution</a>
        <ul>
            
            
            
            <li><a href="overview_concepts.html">Concepts</a></li>
            
            
            
            
            
            
            <li><a href="overview_behaviours.html">Behaviour</a></li>
            
            
            
            
            
            
            <li><a href="overview_principles.html">Principles</a></li>
            
            
            
            
            
            
            <li><a href="overview_data_model.html">Data model</a></li>
            
            
            
            
            
            
            <li><a href="overview_interactions.html">Interactions</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">General Guidance</a>
        <ul>
            
            
            
            <li><a href="pointer_identity.html">Pointer Identity</a></li>
            
            
            
            
            
            
            <li><a href="pointer_errors.html">Pointer Errors</a></li>
            
            
            
            
            
            
            <li><a href="pointer_lifecycle.html">Pointer Lifecycle</a></li>
            
            
            
            
            
            
            <li class="active"><a href="pointer_maintenance.html">Pointer Maintenance</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Development Guidance</a>
        <ul>
            
            
            
            <li><a href="explore.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="development_general_api_guidance.html">General API Guidance</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">DocumentReference API Interactions</a>
                <ul>
                    
                    
                    
                    <li><a href="api_interaction_create.html">Create</a></li>
                    
                    
                    
                    
                    
                    <li><a href="api_interaction_supersede.html">Create (Supersede)</a></li>
                    
                    
                    
                    
                    
                    <li><a href="api_interaction_update.html">Update</a></li>
                    
                    
                    
                    
                    
                    <li><a href="api_interaction_delete.html">Delete</a></li>
                    
                    
                    
                    
                    
                    <li><a href="api_interaction_read.html">Read</a></li>
                    
                    
                    
                    
                    
                    <li><a href="api_interaction_search.html">Search</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            <li class="subfolders">
                <a href="#">Record Retrieval Guidance</a>
                <ul>
                    
                    
                    
                    <li><a href="retrieval_overview.html">Overview</a></li>
                    
                    
                    
                    
                    
                    <li><a href="retrieval_interaction_read.html">Read Interaction</a></li>
                    
                    
                    
                    
                    
                    <li><a href="retrieval_consumer_guidance.html">Consumer Guidance</a></li>
                    
                    
                    
                    
                    
                    <li><a href="retrieval_provider_guidance.html">Provider Guidance</a></li>
                    
                    
                    
                    
                    
                    <li><a href="retrieval_formats.html">Formats</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
            
            
            <li><a href="explore_reference.html">FHIR Profile Reference</a></li>
            
            
            
            
            
            
            <li><a href="explore_fhir_open_source_guidance.html">FHIR Open-Source Resources</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Integrate With Spine</a>
        <ul>
            
            
            
            <li><a href="integration_authentication_authorisation.html">Authentication &amp; Authorisation</a></li>
            
            
            
            
            
            
            <li><a href="explore_rbac_mapping.html">Access Control</a></li>
            
            
            
            
            
            
            <li><a href="development_api_security_guidance.html">Security</a></li>
            
            
            
            
            
            
            <li><a href="integration_access_tokens_JWT.html">Access Tokens (JWT)</a></li>
            
            
            
            
            
            
            <li><a href="integration_auditing.html">Auditing</a></li>
            
            
            
            
            
            
            <li><a href="integration_personal_demographics_service.html">Personal Demographics Service</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
        
            <li><a href="/assure.html">Assure</a></li>
        
    
        
    
    <li>
        <a href="#">Help &amp; Support</a>
        <ul>
            
            
            
            <li><a href="support_faq.html">Frequently Asked Questions (FAQ)</a></li>
            
            
            
            
            
            
            <li><a href="support_communications.html">Communication Channels</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
        
            <li><a href="/tags.html">Tags</a></li>
        
    
        
    
        
            <li><a href="/overview_glossary.html">Glossary</a></li>
        
    
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    <!--</li>-->
</ul>
<!--</div>-->

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            

<div class="post-header">
   <h1 class="post-title-main">Pointer Maintenance</h1>
</div>

<script>
    $(function() {
        $('a[href^="http://"], a[href^="https://"]')
            .attr('target', '_blank') // open all external links in new tab
            .attr('rel', 'noopener noreferrer'); // https://www.jitbit.com/alexblog/256-targetblank---the-most-underestimated-vulnerability-ever/
    });
</script>



<div class="post-content">

   
    <div class="summary">NRL Pointer Maintenance</div>
   

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.
<!-- removed h3 and h4 from toc KGM 10/JULY/2017 -->
$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

  <div markdown="span" class="alert alert-warning" role="alert"><i class="fa fa-warning"></i> <b>Important:</b> This site is under active development by NHS Digital and is intended to provide all the technical resources you need to successfully develop with the National Record Locator API. This project is being developed using an agile methodology, so iterative updates to content will be added on a regular basis.</div>

  <h2 id="overview">Overview</h2>

<p>The NRL allows a Provider to perform four interactions in relation to Pointers:</p>
<ul>
  <li>Create — Results in the storage of a brand new Pointer in NRL</li>
  <li>Update — Modify the status of an existing Pointer in NRL</li>
  <li>Supersede — Replace a pointer. This interaction marks the pointer as superseded and creates a new Pointer in the NRL</li>
  <li>Delete — Remove an existing Pointer from NRL. This Pointer will no longer appear in search results</li>
</ul>

<p>A Pointer’s main role is to refer to another entity, which is some kind of content. The content may be static or dynamic.</p>

<p>Because of this, when considering Pointer maintenance, we must consider the maintenance of two entities:</p>
<ul>
  <li>Changes to the Pointer’s data — the referenced content has not changed, but one or more of the data items captured on the Pointer needs to be modified. In this case, Providers should supersede the existing resource, resulting in the creation of a new Pointer with updated data items.</li>
  <li>Changes to the referenced content — in this case, Providers should supersede the existing resource, resulting in the creation of a new Pointer that references the modified content.</li>
</ul>

<h2 id="creation-of-a-new-pointer">Creation of a New Pointer</h2>

<p>The rules around when a Pointer is created will vary from Provider to Provider, because different business processes 
will be at play within their organisations. Having said that, there is some general guidance that can be given around when creation 
of a new pointer is appropriate.</p>

<p>As discussed in the <a href="overview_concepts.html">concepts section</a>, the NRL has the concept of a static and dynamic content in relation to what the Pointer is referencing. Static content will never change, whereas dynamic content is not guaranteed to be the same from one point in time to another in the future.</p>

<h4 id="static-content">Static Content</h4>

<p>Static content is typically content that undergoes version control. When a change is needed, rather than changing the content directly, 
a new version is created. This new version builds on the original and contains the modified content. Once the changes are complete, this new version is then considered immutable and becomes the current version, replacing the previous one. Rather than NRL holding one Pointer that references the current version of the content, it is recommended that Providers add a new Pointer for each version of their content.</p>

<p>What constitutes a new version is left up to Providers, as it is difficult to prescribe a global versioning policy. What is expected, however, is that there is only ever one current version of a Pointer for an item of content.</p>

<p><img src="images/pointers/pointer_maintenance1.png" alt="Versioning of static content" /></p>

<p><strong><em>Figure 1: How different versions of static content are reflected in NRL. For each new version of static content, a new Pointer is created with a status of current, and the previous version moves from current to superseded.</em></strong></p>

<h4 id="dynamic-content">Dynamic Content</h4>

<p>Dynamic content makes none of the guarantees that static content makes. With static content, the consumer can be certain that the content will always be the same, regardless of the time it was retrieved. In contrast, dynamic content can vary depending upon when it was retrieved.</p>

<p>Dynamic content will typically be served up via an API. It is the lifecycle of the API that can be used to decide when referenced content has changed sufficiently to warrant an existing Pointer being superseded.</p>

<p>Examples of the kinds of things that Providers should consider as triggers to supersede a Pointer are:</p>
<ul>
  <li>API contract</li>
  <li>API data sources</li>
  <li>API URL change or deprecation</li>
</ul>

<h4 id="api-contract">API Contract</h4>

<p>This involves changes to the way that a Consumer would interact with the API. This can cover changes in a number of areas:</p>

<ul>
  <li>Data model — If the model that the content conforms to is changed, the Consumer may no longer be able to interpret the content.</li>
  <li>MIME type — If the format of the content as it is delivered to the Consumer changes, then Consumer may no longer be able to render the content.</li>
  <li>Security — If the mechanism for accessing secured content changes, the Consumer may not be able to access the content.</li>
  <li>Protocol — If the way the content is exchanged between Provider and Consumer changes, the Consumer may no longer be able to negotiate content retrieval.</li>
</ul>

<h4 id="api-data-sources">API Data Sources</h4>

<p>It is possible that the API is drawing data from multiple sources before aggregating the content ready for the Consumer. If the aggregating system is modified to draw data from additional sources, or one source is replaced with another, the content could be considered to have changed to such a degree that it should be reflected by superseding the current Pointer.</p>

<h4 id="api-url-change-or-deprecation">API URL Change Or Deprecation</h4>

<p>If the URL of the API changes, or the API becomes deprecated, a new Pointer should be created and the old one marked as superseded to prevent Consumers from attempting to retrieve content from a non-existent or non-current location.</p>

<h2 id="deleting-an-existing-pointer">Deleting an Existing Pointer</h2>

<p>Deleting a Pointer should only be done in exceptional circumstances. Under most circumstances, a Pointer should be replaced (superseded). If the Provider realises that the Pointer is simply not valid, then it should be updated and marked as entered in error. If the Provider does want to delete the Pointer, it should be done as soon as possible after creation to limit exposure to Consumers. However, even in this circumstance, the Provider should consider marking the Pointer as entered in error instead.</p>

<div class="alert alert-warning" role="alert"><i class="fa fa-warning"></i> <b>Important:</b> When a Pointer is deleted from the NRL, it is marked as "inactive", as opposed to being removed completely. This is commonly known as a "soft deletion". Once a Pointer is deleted, the Pointer can no longer be viewed or edited by any Consumer or Provider.</div>

<h2 id="updating-an-existing-pointer">Updating an Existing Pointer</h2>

<p>An update will be invoked on a Pointer when the Provider needs to change its status from current to entered-in-error. Providers can only change the status property on an existing Pointer. When any other attribute on the Pointer needs to be changed, the Pointer should be superseded, replacing it with an updated version.</p>

<h2 id="managing-pointers-to-content">Managing Pointers to Content</h2>

<p>As noted above in the <a href="#overview">overview</a> section, when a new version of content is created, a new Pointer should be created to reference the new content. Each time a new version of a Pointer is created, the existing one will be marked as superseded, and the new Pointer becomes current. For more detail, see Figure 2.</p>

<p>This is achieved through the combined use of three properties on the Pointer:</p>
<ul>
  <li>Status</li>
  <li>Master identifier or logical identifier</li>
  <li>Related pointers</li>
</ul>

<p><img src="images/pointers/pointer_maintenance2.png" alt="Pointer versioning" /></p>

<p><strong><em>Figure 2: How Pointer versions are maintained in NRL. Each time a new Pointer version is needed, the create message should reference the master identifier or logical identifier of the Pointer to be superseded.</em></strong></p>

<p>When the first version of a Pointer is created, the Provider specifies its status as current and can optionally assign a master identifier value (<code class="highlighter-rouge">1</code> in Figure 2). In this first version of the Pointer, the related pointers collection will be empty.</p>

<p>The end result of asking the NRL to create that Pointer is illustrated on the left-hand side of Figure 2 above – a Pointer has been persisted with a Provider-issued master identifier and a status of current.</p>

<p>At some point in the future, the Provider determines that a new version of the Pointer should be created, perhaps because the static content that the original Pointer references has changed. In this case, the Provider wants a new Pointer to be created to reference the new static content and the existing Pointer to be marked as superseded.</p>

<p>The NRL supports this transition by leveraging the related pointers property in conjunction with the status property and the master identifier or logical identifier. The Provider creates a new Pointer where the status is marked as current, with a master identifier value (<code class="highlighter-rouge">2</code> in Figure 2) that is different from the existing Pointer’s master identifier (see <a href="pointer_identity.html">Pointer identity</a> for more detail), and the related pointers collection is populated with the master identifier of the existing Pointer (<code class="highlighter-rouge">1</code> in Figure 2).</p>

<p>Upon receipt of this Pointer, the NRL resolves the related Pointer and sets its status to superseded. Once this is successfully completed, the NRL persists the new pointer. The end result is that the NRL is now in the state described above: two Pointers exist where one has been superseded by the other. This pattern of superseding can be repeated indefinitely by a Provider, leading to multiple superseded versions of a Pointer, but there can only ever be one current version.</p>

<h2 id="pointer-lineage">Pointer Lineage</h2>

<p>A consequence of creating a relationship between Pointers where one supersedes another is that a lineage of Pointers is created.</p>

<p>In this context, “lineage” describes the line of descendants of an original Pointer. This line in effect describes each of the different versions of the content that each Pointer references. It is a view of the evolution of the content, with the oldest content being replaced by newer content.</p>

<p><img src="images/pointers/pointer_lineage.png" alt="Pointer lineage" /></p>

<p><strong><em>Figure 3: Pointer lineage. As soon as a Pointer is replaced (superseded) by another one, a lineage of related Pointers is created.</em></strong></p>

<p>Figure 3 above illustrates the lineage concept. Three Pointers exists in NRL (1, 2, and 3). Pointer 1 was the original and references content in the Provider’s system. After Pointer 1 was published, a new version of the content referenced was created. This triggered the Provider to publish a new Pointer (2) that superseded Pointer 1. Finally, the process was repeated with Pointer 3, which references the newest version of the content.</p>


    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="tags.html?tags=pointers" class="btn btn-default navbar-btn cursorNorm" role="button">pointers</a>
        
        
        
        <a href="tags.html?tags=for_providers" class="btn btn-default navbar-btn cursorNorm" role="button">for providers</a>
        
        
        
        <a href="tags.html?tags=for_consumers" class="btn btn-default navbar-btn cursorNorm" role="button">for consumers</a>
        
        
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
                    <img class="pull-left" src="images/explanatoryline.png" alt="NHS Digital Explanatory Line"/>
                    <br/>
                    &copy;2020 NHS Digital<br />
                     Site last generated: Mar 30, 2020 <br />
                    6f68aaa672cc33d7cfbcf7b81b91ebc455b910a9<br/>
                    <br/>
                    <!-- OGL Licence -->
                    <div class="open-government-licence">
                        <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license" class="no_icon"><img src="images/licence/ogl-symbol-41px-retina-black.png"></img></a>
                        <p>All content is available under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license" class="no_icon">Open Government Licence v3.0</a>, except where otherwise stated</p>
                    </div>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99659472-1', 'auto');
  ga('send', 'pageview');

</script>

 


</body>

</html>
