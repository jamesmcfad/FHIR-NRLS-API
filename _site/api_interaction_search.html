<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="To support parameterised search of the NRL.">
<meta name="keywords" content="fhirpointersfor_consumers,  structured rest documentreference">
<title>API Search Interaction | NRL</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="FHIR-NRLS-API" href="https://developer.nhs.uk/apis/nrl/feed.xml">





    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> NRL API | FHIR&reg;</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="Search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="API Search Interaction">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                








<ul id="mysidebar" class="nav">

    <!-- <p style="font-size:2em;">-->

       <!-- <img src="images/interopen.png" height="48px" alt="INTEROpen Logo"/>
    INTEROPen</p>
    <p style="font-size:16px;">Supported by -->
    <img src="images/logo.png"   alt="NHS Digital Logo"/>
    <!--</p>-->


    <li class="sidebarTitle">NRL 2.3.0-beta API <i>specification</i></li>
    
    
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="index.html">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="overview_guide_versioning.html">Product Versioning</a></li>
            
            
            
            
            
            
            <li><a href="overview_release_notes.html">Release Notes</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Solution</a>
        <ul>
            
            
            
            <li><a href="overview_concepts.html">Concepts</a></li>
            
            
            
            
            
            
            <li><a href="overview_behaviours.html">Behaviour</a></li>
            
            
            
            
            
            
            <li><a href="overview_principles.html">Principles</a></li>
            
            
            
            
            
            
            <li><a href="overview_data_model.html">Data model</a></li>
            
            
            
            
            
            
            <li><a href="overview_interactions.html">Interactions</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">General Guidance</a>
        <ul>
            
            
            
            <li><a href="pointer_identity.html">Pointer Identity</a></li>
            
            
            
            
            
            
            <li><a href="pointer_errors.html">Pointer Errors</a></li>
            
            
            
            
            
            
            <li><a href="pointer_lifecycle.html">Pointer Lifecycle</a></li>
            
            
            
            
            
            
            <li><a href="pointer_maintenance.html">Pointer Maintenance</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Development Guidance</a>
        <ul>
            
            
            
            <li><a href="explore.html">Overview</a></li>
            
            
            
            
            
            
            <li><a href="development_general_api_guidance.html">General API Guidance</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">DocumentReference API Interactions</a>
                <ul>
                    
                    
                    
                    <li><a href="api_interaction_create.html">Create</a></li>
                    
                    
                    
                    
                    
                    <li><a href="api_interaction_supersede.html">Create (Supersede)</a></li>
                    
                    
                    
                    
                    
                    <li><a href="api_interaction_update.html">Update</a></li>
                    
                    
                    
                    
                    
                    <li><a href="api_interaction_delete.html">Delete</a></li>
                    
                    
                    
                    
                    
                    <li><a href="api_interaction_read.html">Read</a></li>
                    
                    
                    
                    
                    
                    <li class="active"><a href="api_interaction_search.html">Search</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            <li class="subfolders">
                <a href="#">Record Retrieval Guidance</a>
                <ul>
                    
                    
                    
                    <li><a href="retrieval_overview.html">Overview</a></li>
                    
                    
                    
                    
                    
                    <li><a href="retrieval_interaction_read.html">Read Interaction</a></li>
                    
                    
                    
                    
                    
                    <li><a href="retrieval_consumer_guidance.html">Consumer Guidance</a></li>
                    
                    
                    
                    
                    
                    <li><a href="retrieval_provider_guidance.html">Provider Guidance</a></li>
                    
                    
                    
                    
                    
                    <li><a href="retrieval_formats.html">Formats</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
            
            
            <li><a href="explore_reference.html">FHIR Profile Reference</a></li>
            
            
            
            
            
            
            <li><a href="explore_fhir_open_source_guidance.html">FHIR Open-Source Resources</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Integrate With Spine</a>
        <ul>
            
            
            
            <li><a href="integration_authentication_authorisation.html">Authentication &amp; Authorisation</a></li>
            
            
            
            
            
            
            <li><a href="explore_rbac_mapping.html">Access Control</a></li>
            
            
            
            
            
            
            <li><a href="development_api_security_guidance.html">Security</a></li>
            
            
            
            
            
            
            <li><a href="integration_access_tokens_JWT.html">Access Tokens (JWT)</a></li>
            
            
            
            
            
            
            <li><a href="integration_auditing.html">Auditing</a></li>
            
            
            
            
            
            
            <li><a href="integration_personal_demographics_service.html">Personal Demographics Service</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
        
            <li><a href="/assure.html">Assure</a></li>
        
    
        
    
    <li>
        <a href="#">Help &amp; Support</a>
        <ul>
            
            
            
            <li><a href="support_faq.html">Frequently Asked Questions (FAQ)</a></li>
            
            
            
            
            
            
            <li><a href="support_communications.html">Communication Channels</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
        
            <li><a href="/tags.html">Tags</a></li>
        
    
        
    
        
            <li><a href="/overview_glossary.html">Glossary</a></li>
        
    
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    <!--</li>-->
</ul>
<!--</div>-->

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            

<div class="post-header">
   <h1 class="post-title-main">API Search Interaction</h1>
</div>

<script>
    $(function() {
        $('a[href^="http://"], a[href^="https://"]')
            .attr('target', '_blank') // open all external links in new tab
            .attr('rel', 'noopener noreferrer'); // https://www.jitbit.com/alexblog/256-targetblank---the-most-underestimated-vulnerability-ever/
    });
</script>



<div class="post-content">

   
    <div class="summary">To support parameterised search of the NRL.</div>
   

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.
<!-- removed h3 and h4 from toc KGM 10/JULY/2017 -->
$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

  <div markdown="span" class="alert alert-warning" role="alert"><i class="fa fa-warning"></i> <b>Important:</b> This site is under active development by NHS Digital and is intended to provide all the technical resources you need to successfully develop with the National Record Locator API. This project is being developed using an agile methodology, so iterative updates to content will be added on a regular basis.</div>

  
<h2 id="0-references">References</h2>

<table border="0" width="100%">
    <tr>
        <td><div class="alert alert-info" role="alert"><i class="fa fa-gavel"></i> <b>NHS Digital Profile:</b><br /> <a href="https://fhir.nhs.uk/STU3/StructureDefinition/NRL-DocumentReference-1">DocumentReference</a></div></td>
        <td><div class="alert alert-danger" role="alert"><i class="fa fa-fire"></i>  <b>HL7 FHIR STU3 Resource:</b><br /> <a href="https://www.hl7.org/fhir/STU3/documentreference.html">DocumentReference</a></div> </td>
          <td><div class="alert alert-success" role="alert"><i class="fa fa-cog"></i> <b>User Stories:</b><br /> - </div></td>
        <!--<td><div markdown="span" class="alert alert-success" role="alert"><i class="fa fa-cog"></i> <b>User Stories:</b><br> [User Stories]( )</div></td>-->
</tr>
</table>

<h2 id="search">Search</h2>

<p>Consumer interaction to support parameterised search of the NRL.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>In addition to the requirements on this page the general guidance and requirements detailed on the <a href="explore.html#2-prerequisites-for-nrl-api">Development Guidance</a> page MUST be followed when using this interaction.</p>

<h2 id="search-request-headers">Search Request Headers</h2>

<p>Consumer and Provider API search requests support the following HTTP request headers:</p>

<table>
  <thead>
    <tr>
      <th>Header</th>
      <th>Value</th>
      <th>Conformance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">Accept</code></td>
      <td>The <code class="highlighter-rouge">Accept</code> header indicates the format of the response the client is able to understand, this will be one of the following <code class="highlighter-rouge">application/fhir+json</code> or <code class="highlighter-rouge">application/fhir+xml</code>. See the RESTful API <a href="development_general_api_guidance.html#content-types">Content types</a> section.</td>
      <td>OPTIONAL</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Authorization</code></td>
      <td>The <code class="highlighter-rouge">Authorization</code> header will carry the base64url encoded JSON web token required for audit on the spine - see <a href="integration_access_tokens_JWT.html">Access Tokens (JWT)</a> for details.</td>
      <td>REQUIRED</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">fromASID</code></td>
      <td>Client System ASID</td>
      <td>REQUIRED</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">toASID</code></td>
      <td>The Spine ASID</td>
      <td>REQUIRED</td>
    </tr>
  </tbody>
</table>

<h2 id="search-documentreference">Search DocumentReference</h2>

<div class="alert alert-success" role="alert">
<code class="highlighter-rouge">GET [baseUrl]/DocumentReference?[searchParameters]</code>
</div>

<p>Though the NRL does not keep a version history of each DocumentReference, each one does hold a versionId.</p>

<!--Though the NRL does not keep a version history of each DocumentReference, each one does hold a versionId to support the NRL update strategy. -->

<h2 id="search-parameters">Search Parameters</h2>

<p>
This implementation guide outlines the search parameters for the DocumentReference resource in the table below. 

<!--To be conformant, consumer systems are required to implement all of the MUST parameters.
Systems may implement the full list of search parameters for the DocumentReference resource (<a href="https://www.hl7.org/fhir/STU3/documentreference.html#search">HL7 FHIR STU3 DocumentReference</a>).-->
</p>
<!--
<div markdown="span" class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Details on the Search Parameters selection and feedback process can be found here [Search Parameters](profiles_search_parameters.html)</div>
<br>
-->

<table style="min-width:100%;width:100%">
<tr id="clinical">
    <th style="width:15%;">Name</th>
    <th style="width:15%;">Type</th>
    <th style="width:30%;">Description</th>
    <th style="width:5%;">Conformance</th>
    <th style="width:35%;">Path</th>
</tr>
<!--
<tr>
    <td><code class="highlighter-rouge">patient</code></td>
    <td><code class="highlighter-rouge">reference</code></td>
    <td>Who/what is the subject of the document</td>
    <td>RECOMMENDED</td>
    <td>DocumentReference.subject<br>(Patient)</td>
</tr>

<tr>
    <td><code class="highlighter-rouge">period</code></td>
    <td><code class="highlighter-rouge">date</code></td>
    <td>Time of service that is being documented</td>
    <td>RECOMMENDED</td>
    <td>DocumentReference.context.period</td>
</tr>
<tr>
    <td><code class="highlighter-rouge">type</code></td>
    <td><code class="highlighter-rouge">token</code></td>
    <td>Kind of document (SNOMED CT if possible)</td>
    <td>RECOMMENDED</td>
    <td>DocumentReference.type</td>
</tr> 
-->
<tr>
    <td><code class="highlighter-rouge">_id</code></td>
    <td><code class="highlighter-rouge">token</code></td>
    <td>The logical id of the resource</td>
    <td>RECOMMENDED</td>
    <td>DocumentReference.id</td>
</tr>
<tr>
    <td><code class="highlighter-rouge">custodian</code></td>
    <td><code class="highlighter-rouge">reference</code></td>
    <td>Organisation which maintains the document reference</td>
    <td>OPTIONAL</td>
    <td>DocumentReference.custodian<br />(Organisation ODS Code)</td>
</tr>
<tr>
    <td><code class="highlighter-rouge">subject</code></td>
    <td><code class="highlighter-rouge">reference</code></td>
    <td>Who/what is the subject of the document</td>
    <td>RECOMMENDED</td>
    <td>DocumentReference.subject<br />(Patient NHS Number)</td>
</tr>
<tr>
    <td><code class="highlighter-rouge">type</code></td>
    <td><code class="highlighter-rouge">token</code></td>
    <td>Kind of document (SNOMED CT)</td>
    <td>OPTIONAL</td>
    <td>DocumentReference.type</td>
</tr> 
<tr>
    <td><code class="highlighter-rouge">_summary</code></td>
    <td><code class="highlighter-rouge">Summary</code></td>
    <td>Total number of matching results</td>
    <td>OPTIONAL</td>
    <td>N/A</td>
</tr>
</table>

<p>When the <code class="highlighter-rouge">_id</code> search parameter is used by a client it MUST only be used as a single search parameter and MUST not be used in conjunction with any other search parameter to form part of a combination search query with the exception of ‘_format’ parameter.</p>

<p>When the <code class="highlighter-rouge">subject</code> parameter is used by a client it MAY be used in conjunction with the <code class="highlighter-rouge">custodian</code> and <code class="highlighter-rouge">type</code> search parameters to form a combination search query. The <code class="highlighter-rouge">custodian</code> and <code class="highlighter-rouge">type</code> search parameters MUST only be used to form combination search queries.</p>

<div class="alert alert-info" role="alert">
    <i class="fa fa-info-circle"></i> <b>Note:</b> The format of the parameters must be of the form:<br />
	<br />
	<b>Subject:</b> <code class="highlighter-rouge">https://demographics.spineservices.nhs.uk/STU3/Patient/[NHS Number]</code>.<br />
	<b>Custodian:</b> <code class="highlighter-rouge">https://directory.spineservices.nhs.uk/STU3/Organization/[ODS Code]</code>.<br />
	<b>Type:</b> <code class="highlighter-rouge">http://snomed.info/sct|[code]</code>.
	
</div>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Please make sure that all query parameters are percent encoded. In particular the pipe (|) character must be percent encoded (%7C).</div>

<h4 id="_id"> _id</h4>

<p>The search parameter <code class="highlighter-rouge">_id</code> refers to the logical id of the DocumentReference resource and can be used when the search context specifies the DocumentReference resource type.</p>

<p>Functionally this search is the equivalent to a simple pointer read operation.</p>

<p>See <a href="https://www.hl7.org/fhir/stu3/search.html#id">_id</a> for details on this parameter. The _id parameter can be used as follows:</p>

<!--
<div markdown="span" class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?patient=[id]</div>


<p>This MUST be supported for all endpoint provider systems.</p>

<p> <code class="highlighter-rouge">id</code> is the logical id of the patient on the server which can be obtained by a <a href="api_entity_patient.html">Patient </a> resource query.</p>

<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?patient=42
</span></code>
Return all DocumentReference resources for Patients with a logical id of 42</pre>
</div>

-->
<div class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?_id=[id]</div>

<p>When the <code class="highlighter-rouge">_id</code> search parameter is used by a client, this search parameter MUST only be used as a single search parameter and MUST not be used in conjunction with any other parameter to form part of a combination search query with the exception of ‘_format’ parameter.</p>

<!--<div markdown="span" class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?subject.identifier=[system]|[code]</div>-->

<!--
<p>This MUST be supported for all consumer systems.</p>

<p>This SHOULD be supported by <a href="https://en.wikipedia.org/wiki/Middleware">middleware</a> systems (e.g. <a href="https://en.wikipedia.org/wiki/Enterprise_application_integration">enterprise application integration (EAI)</a> and the <a href="https://en.wikipedia.org/wiki/Enterprise_service_bus">enterprise service bus (ESB)</a>) and MAY be supported for endpoint provider systems.</p> 
-->

<!--
<p><code class="highlighter-rouge">system</code> is a uniform resource identifier which defines which CodeSystem the identifer belongs to. For NHS Number this would be <code class="highlighter-rouge">https://fhir.nhs.uk/Id/nhs-number</code> and <code class="highlighter-rouge">code</code> would be the NHS Number.</p>
-->
<!--
<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?_id=da2b6e8a-3c8f-11e8-baae-6c3be5a609f5-584d385036514c383142
</span></code>
Return the DocumentReference resource for a pointer with a logical identifier of da2b6e8a-3c8f-11e8-baae-6c3be5a609f5-584d385036514c383142</pre>
</div>


<div markdown="span" class="alert alert-info" role="alert">
    <i class="fa fa-info-circle"></i> <b>Note:</b> The format of the logical identifier is: [TBC].
</div>
-->
<!--
<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?subject.identifier=https://fhir.nhs.uk/Id/nhs-number|9876543210
</span></code>
Return all DocumentReference resources for subjects (Patients) with a NHS Number of 9876543210</pre>
</div>
-->

<!--
<p> Suppliers and organisations MAY create their own `systemUri`s for local patient identifiers, e.g. the fictional Jorvik NHS Trust could use <code class="highlighter-rouge">http://fhir.jorvik.nhs.uk/Patient</code> to identify a number as the trusts hospital number.</p>
<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?patient.identifier=https://fhir.jorvik.nhs.uk/Patient|12345678
</span></code>
Return all DocumentReference resources for Patients with Jorvik Trust Hospital Number of 12345678</pre>
</div>
-->

<h4 id="subject"> subject</h4>

<p>See <a href="https://www.hl7.org/fhir/STU3/search.html#reference">reference</a> for details on this parameter. The subject parameter can be used as follows:</p>

<!--
<div markdown="span" class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?patient=[id]</div>


<p>This MUST be supported for all endpoint provider systems.</p>

<p> <code class="highlighter-rouge">id</code> is the logical id of the patient on the server which can be obtained by a <a href="api_entity_patient.html">Patient </a> resource query.</p>

<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?patient=42
</span></code>
Return all DocumentReference resources for Patients with a logical id of 42</pre>
</div>

-->
<div class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?subject=[reference]</div>

<!--<div markdown="span" class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?subject.identifier=[system]|[code]</div>-->

<!--
<p>This MUST be supported for all consumer systems.</p>

<p>This SHOULD be supported by <a href="https://en.wikipedia.org/wiki/Middleware">middleware</a> systems (e.g. <a href="https://en.wikipedia.org/wiki/Enterprise_application_integration">enterprise application integration (EAI)</a> and the <a href="https://en.wikipedia.org/wiki/Enterprise_service_bus">enterprise service bus (ESB)</a>) and MAY be supported for endpoint provider systems.</p> 
-->

<!--
<p><code class="highlighter-rouge">system</code> is a uniform resource identifier which defines which CodeSystem the identifer belongs to. For NHS Number this would be <code class="highlighter-rouge">https://fhir.nhs.uk/Id/nhs-number</code> and <code class="highlighter-rouge">code</code> would be the NHS Number.</p>
-->

<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?subject=https://demographics.spineservices.nhs.uk/STU3/Patient/9876543210
</span></code>
Return all DocumentReference resources for a patient with a NHS Number of 9876543210</pre>
</div>

<!--
<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?subject.identifier=https://fhir.nhs.uk/Id/nhs-number|9876543210
</span></code>
Return all DocumentReference resources for subjects (Patients) with a NHS Number of 9876543210</pre>
</div>
-->

<!--
<p> Suppliers and organisations MAY create their own `systemUri`s for local patient identifiers, e.g. the fictional Jorvik NHS Trust could use <code class="highlighter-rouge">http://fhir.jorvik.nhs.uk/Patient</code> to identify a number as the trusts hospital number.</p>
<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?patient.identifier=https://fhir.jorvik.nhs.uk/Patient|12345678
</span></code>
Return all DocumentReference resources for Patients with Jorvik Trust Hospital Number of 12345678</pre>
</div>
-->

<h4 id="subject and custodian"> subject and custodian</h4>

<!--<p>See <a href="https://www.hl7.org/fhir/STU3/search.html#reference">reference</a> for details on this parameter. The patient parameter can be used as follows:</p>-->

<!--
<div markdown="span" class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?patient=[id]</div>


<p>This MUST be supported for all endpoint provider systems.</p>

<p> <code class="highlighter-rouge">id</code> is the logical id of the patient on the server which can be obtained by a <a href="api_entity_patient.html">Patient </a> resource query.</p>

<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?patient=42
</span></code>
Return all DocumentReference resources for Patients with a logical id of 42</pre>
</div>

-->
<div class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?subject=[reference]&amp;custodian=[reference]<br />
</div>

<!--<div markdown="span" class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?subject.identifier=[system]|[code]</div>-->

<!--
<p>This MUST be supported for all consumer systems.</p>

<p>This SHOULD be supported by <a href="https://en.wikipedia.org/wiki/Middleware">middleware</a> systems (e.g. <a href="https://en.wikipedia.org/wiki/Enterprise_application_integration">enterprise application integration (EAI)</a> and the <a href="https://en.wikipedia.org/wiki/Enterprise_service_bus">enterprise service bus (ESB)</a>) and MAY be supported for endpoint provider systems.</p> 
-->

<!--
<p><code class="highlighter-rouge">system</code> is a uniform resource identifier which defines which CodeSystem the identifer belongs to. For NHS Number this would be <code class="highlighter-rouge">https://fhir.nhs.uk/Id/nhs-number</code> and <code class="highlighter-rouge">code</code> would be the NHS Number.</p>
-->

<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?subject=https://demographics.spineservices.nhs.uk/STU3/Patient/9876543210&amp;custodian=https://directory.spineservices.nhs.uk/STU3/Organization/RR8
</span></code>
Return all DocumentReference resources for a patient with a NHS Number of 9876543210 and a pointer provider ODS code of RR8.</pre>
</div>

<!--
<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?subject.identifier=https://fhir.nhs.uk/Id/nhs-number|9876543210
</span></code>
Return all DocumentReference resources for subjects (Patients) with a NHS Number of 9876543210</pre>
</div>
-->

<!--
<p> Suppliers and organisations MAY create their own `systemUri`s for local patient identifiers, e.g. the fictional Jorvik NHS Trust could use <code class="highlighter-rouge">http://fhir.jorvik.nhs.uk/Patient</code> to identify a number as the trusts hospital number.</p>
<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?patient.identifier=https://fhir.jorvik.nhs.uk/Patient|12345678
</span></code>
Return all DocumentReference resources for Patients with Jorvik Trust Hospital Number of 12345678</pre>
</div>
-->

<h4 id="subject and type"> subject and type</h4>

<!--<p>See <a href="https://www.hl7.org/fhir/STU3/search.html#reference">reference</a> for details on this parameter. The patient parameter can be used as follows:</p>-->

<!--
<div markdown="span" class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?patient=[id]</div>


<p>This MUST be supported for all endpoint provider systems.</p>

<p> <code class="highlighter-rouge">id</code> is the logical id of the patient on the server which can be obtained by a <a href="api_entity_patient.html">Patient </a> resource query.</p>

<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?patient=42
</span></code>
Return all DocumentReference resources for Patients with a logical id of 42</pre>
</div>

-->
<div class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?subject=[reference]&amp;type.coding=http://snomed.info/sct%7C[code]<br />
</div>

<!--<div markdown="span" class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?subject.identifier=[system]|[code]</div>-->

<!--
<p>This MUST be supported for all consumer systems.</p>

<p>This SHOULD be supported by <a href="https://en.wikipedia.org/wiki/Middleware">middleware</a> systems (e.g. <a href="https://en.wikipedia.org/wiki/Enterprise_application_integration">enterprise application integration (EAI)</a> and the <a href="https://en.wikipedia.org/wiki/Enterprise_service_bus">enterprise service bus (ESB)</a>) and MAY be supported for endpoint provider systems.</p> 
-->

<!--
<p><code class="highlighter-rouge">system</code> is a uniform resource identifier which defines which CodeSystem the identifer belongs to. For NHS Number this would be <code class="highlighter-rouge">https://fhir.nhs.uk/Id/nhs-number</code> and <code class="highlighter-rouge">code</code> would be the NHS Number.</p>
-->

<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?subject=https://demographics.spineservices.nhs.uk/STU3/Patient/9876543210&amp;type.coding=http://snomed.info/sct%7C736253002
</span></code>
Return all DocumentReference records for a patient with NHS Number of 9876543210 and a pointer type of Mental Health Crisis plan.</pre>
</div>

<!--
<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?subject.identifier=https://fhir.nhs.uk/Id/nhs-number|9876543210
</span></code>
Return all DocumentReference resources for subjects (Patients) with a NHS Number of 9876543210</pre>
</div>
-->

<!--
<p> Suppliers and organisations MAY create their own `systemUri`s for local patient identifiers, e.g. the fictional Jorvik NHS Trust could use <code class="highlighter-rouge">http://fhir.jorvik.nhs.uk/Patient</code> to identify a number as the trusts hospital number.</p>
<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?patient.identifier=https://fhir.jorvik.nhs.uk/Patient|12345678
</span></code>
Return all DocumentReference resources for Patients with Jorvik Trust Hospital Number of 12345678</pre>
</div>
-->

<h4 id="_id"> _summary</h4>

<p>The search parameter <code class="highlighter-rouge">_summary</code> allows the client to retrieve the number of <code class="highlighter-rouge">DocumentReference</code>s that match a given search.</p>

<p>See <a href="https://www.hl7.org/fhir/search.html#summary">_summary</a> for details on this parameter. The _summary parameter can be used as follows:</p>

<div class="alert alert-success" role="alert">
GET [baseUrl]/DocumentReference?subject=[reference]&amp;_summary=count</div>

<div class="language-http highlighter-rouge">
<pre class="highlight"><code><span class="err">GET [baseUrl]/DocumentReference?subject=https://demographics.spineservices.nhs.uk/STU3/Patient/9876543210&amp;_summary=count
</span></code>
Return a count of resources for a patient with a NHS Number of 9876543210</pre>
</div>

<p>The <code class="highlighter-rouge">_summary</code> search parameter must be set to the value ‘count’ to retrieve the number of matching results.
Other FHIR values for this search parameter are not supported.</p>

<h2 id="search-response">Search Response</h2>

<p>Success:</p>

<ul>
  <li>MUST return a <code class="highlighter-rouge">200</code> <strong>OK</strong> HTTP status code on successful execution of the interaction.</li>
  <li>MUST return a <code class="highlighter-rouge">Bundle</code> of <code class="highlighter-rouge">type</code> searchset, containing either:
    <ul>
      <li>
        <p>One or more <code class="highlighter-rouge">DocumentReference</code> resources that conform to the NRL DocumentReference FHIR profile and that have the status value of “current”.</p>

        <div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> The version of the pointer model (FHIR profile) will be indicated in the <code class="highlighter-rouge">DocumentReference.meta.profile</code> metadata attribute for each pointer (see <a href="explore_reference.html#1-profiles">FHIR Resources &amp; References</a>). A ‘Bundle’ may contain pointers which conform to different versions of the pointer model.</div>
      </li>
      <li>
        <p>A <code class="highlighter-rouge">0</code> (zero) total value indicating no record was matched, i.e. an empty <code class="highlighter-rouge">Bundle</code>.</p>

        <div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> The NRL Service will ONLY return an empty bundle if a Spine Clincals record exists and there is no DocumentReference for that specific Clinicals record.</div>
      </li>
    </ul>

    <p><!--<div markdown="span" class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> The returned searchset bundle does NOT currently support: <br/> <br/> (1) the `self link`, which carries the encoded parameters that were actually used to process the search. <br/> <br/> (2) the identity of resources in the entry using the `fullUrl` element. <br/> <br/> (3) resources matched in a successful search using the `search.mode` element. <br/> <br/> NB: The NRL Service will ONLY return an empty bundle if a Spine Clincals record exists and there is no DocumentReference for that specific Clinicals record.</div>
--></p>
  </li>
  <li>
    <p>Where a DocumentReference is returned, it MUST include the versionId <!--and fullUrl--> of the current version of the DocumentReference resource.</p>
  </li>
  <li>
    <p>When a Consumer retrieves a DocumentReference if the masterIdentifier is set then it SHOULD be included in the returned DocumentReference.</p>
  </li>
  <li>When a Consumer retrieves a DocumentReference if the relatesTo is set then it SHOULD be included in the returned DocumentReference.</li>
</ul>

<p>Failure:</p>

<p>The following errors can be triggered when performing this operation:</p>

<ul>
  <li><a href="development_general_api_guidance.html#invalid-nhs-number">Invalid NHS number</a></li>
  <li><a href="development_general_api_guidance.html#parameters">Invalid parameter</a></li>
  <li><a href="development_general_api_guidance.html#resource-not-found">No record found</a></li>
</ul>

<h2 id="example-scenario">Example Scenario</h2>

<p>An authorised NRL Consumer searches for a patient’s relevant health record using the NRL to discover potentially vital information to support a patient’s emergency crisis care.</p>

<h3 id="request-query">Request Query</h3>

<p>Return all DocumentReference resources (pointers) for a patient with a NHS Number of 9876543210. The format of the response body will be XML.</p>

<h4 id="curl">cURL</h4>

<pre class="embedcurl" title="Search DocumentReference" width="100%" height="200px">curl -H 'Accept: application/fhir+xml' -H 'Authorization: BEARER [token]' -X GET  '[baseUrl]/DocumentReference?subject=https://demographics.spineservices.nhs.uk/STU3/Patient/9876543210&amp;_format=xml'</pre>
<!-- You only need to reference this script once per page. -->
<script src="https://www.embedcurl.com/embedcurl.min.js" async=""></script>

<h4 id="query-response-http-headers">Query Response Http Headers</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 OK
Server: nginx/1.10.0 (Ubuntu)
Date: Mon, 19 Jun 2017 08:36:12 GMT
Content-Type: application/fhir+xml;charset=utf-8
Last-Modified: Mon, 19 Jun 2017 08:36:12 GMT
</code></pre></div></div>

<h4 id="query-response">Query Response</h4>

<h5 id="single-pointer-documentreference-returned"><strong>Single Pointer (DocumentReference) Returned:</strong></h5>

<ul>
  <li>HTTP 200-Request was successfully executed</li>
  <li>Bundle resource of type searchset containing a total value ‘1’ DocumentReference resource that conforms to the <code class="highlighter-rouge">NRL-DocumentReference-1</code> profile.</li>
</ul>

<div class="github-sample-wrapper scroll-height-350">

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Bundle</span>
    <span class="na">xmlns=</span><span class="s">"http://hl7.org/fhir"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">"dd9724d1-7b61-44e2-9023-b72e6b966018-76563212455590986546"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">"searchset"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;total</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link&gt;</span>
        <span class="nt">&lt;relation</span> <span class="na">value=</span><span class="s">"self"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">"https://psis-sync.national.ncrs.nhs.uk/DocumentReference?subject=https%3A%2F%2Fdemographics.spineservices.nhs.uk%2FSTU3%2FPatient%2F9876543210"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/link&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
        <span class="nt">&lt;fullUrl</span> <span class="na">value=</span><span class="s">"https://psis-sync.national.ncrs.nhs.uk/DocumentReference/0353e505-f7be-4c20-8f4e-337e79a32c51-76009894321256642261"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;resource&gt;</span>
            <span class="nt">&lt;DocumentReference&gt;</span>
                <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">"0353e505-f7be-4c20-8f4e-337e79a32c51-76009894321256642261"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;meta&gt;</span>
                    <span class="nt">&lt;profile</span> <span class="na">value=</span><span class="s">"https://fhir.nhs.uk/STU3/StructureDefinition/NRL-DocumentReference-1"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;version</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;lastUpdated</span> <span class="na">value=</span><span class="s">"2016-03-08T15:26:00+01:00"</span><span class="nt">/&gt;</span> 
                <span class="nt">&lt;/meta&gt;</span>
                <span class="nt">&lt;masterIdentifier&gt;</span>
                    <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"urn:ietf:rfc:3986"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"urn:oid:1.3.6.1.4.1.21367.2005.3.7"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/masterIdentifier&gt;</span>
                <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">"current"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;type&gt;</span>
                    <span class="nt">&lt;coding&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://snomed.info/sct"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"736253002"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Mental health crisis plan"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/coding&gt;</span>
                <span class="nt">&lt;/type&gt;</span>
                <span class="nt">&lt;class&gt;</span>
                    <span class="nt">&lt;coding&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://snomed.info/sct"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"734163000"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Care plan"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/coding&gt;</span>
                <span class="nt">&lt;/class&gt;</span>
                <span class="nt">&lt;subject&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">"https://demographics.spineservices.nhs.uk/STU3/Patient/9876543210"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/subject&gt;</span>
                <span class="nt">&lt;indexed</span> <span class="na">value=</span><span class="s">"2016-03-08T15:26:01+01:00"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;author&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">"https://directory.spineservices.nhs.uk/STU3/Organization/RGD"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/author&gt;</span>
                <span class="nt">&lt;custodian&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">"https://directory.spineservices.nhs.uk/STU3/Organization/RR8"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/custodian&gt;</span>
                <span class="nt">&lt;relatesTo&gt;</span>
                    <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"replaces"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;target&gt;</span>
                        <span class="nt">&lt;identifier&gt;</span>
                            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"urn:ietf:rfc:3986"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"urn:oid:1.3.6.1.4.1.21367.2005.3.6"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;/identifier&gt;</span>
                    <span class="nt">&lt;/target&gt;</span>
                <span class="nt">&lt;/relatesTo&gt;</span>
                <span class="nt">&lt;content&gt;</span>
                    <span class="nt">&lt;attachment&gt;</span>
                        <span class="nt">&lt;contentType</span> <span class="na">value=</span><span class="s">"application/pdf"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">"https://p1.nhs.uk/MentalhealthCrisisPlanReport.pdf"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;creation</span> <span class="na">value=</span><span class="s">"2016-03-08T15:26:00+01:00"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/attachment&gt;</span>
                    <span class="nt">&lt;format&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"https://fhir.nhs.uk/STU3/CodeSystem/NRL-FormatCode-1"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"urn:nhs-ic:unstructured"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Unstructured Document"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/format&gt;</span>
                    <span class="nt">&lt;extension</span> <span class="na">url=</span><span class="s">"https://fhir.nhs.uk/STU3/StructureDefinition/Extension-NRL-ContentStability-1"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;valueCodeableConcept&gt;</span>
                            <span class="nt">&lt;coding&gt;</span>
                                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"https://fhir.nhs.uk/STU3/CodeSystem/NRL-ContentStability-1"</span><span class="nt">/&gt;</span>
                                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"static"</span><span class="nt">/&gt;</span>
                                <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Static"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;/coding&gt;</span>
                        <span class="nt">&lt;/valueCodeableConcept&gt;</span>
                    <span class="nt">&lt;/extension&gt;</span>
                <span class="nt">&lt;/content&gt;</span>
                <span class="nt">&lt;context&gt;</span>
                    <span class="nt">&lt;period&gt;</span>
                        <span class="nt">&lt;start</span> <span class="na">value=</span><span class="s">"2016-03-07T13:34:00+01:00"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/period&gt;</span>
                    <span class="nt">&lt;practiceSetting&gt;</span>
                        <span class="nt">&lt;coding&gt;</span>
                            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://snomed.info/sct"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"708168004"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Mental health service"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;/coding&gt;</span>
                    <span class="nt">&lt;/practiceSetting&gt;</span>
                <span class="nt">&lt;/context&gt;</span>
            <span class="nt">&lt;/DocumentReference&gt;</span>
        <span class="nt">&lt;/resource&gt;</span>
        <span class="nt">&lt;search&gt;</span>
            <span class="nt">&lt;mode</span> <span class="na">value=</span><span class="s">"match"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/search&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
<span class="nt">&lt;/Bundle&gt;</span></code></pre></figure>

</div>

<h5 id="multiple-pointers-documentreference-returned"><strong>Multiple Pointers (DocumentReference) Returned:</strong></h5>

<ul>
  <li>HTTP 200-Request was successfully executed</li>
  <li>Bundle resource of type searchset containing a total value ‘2’ DocumentReference resources that conform to the <code class="highlighter-rouge">NRL-DocumentReference-1</code> profile</li>
</ul>

<div class="github-sample-wrapper scroll-height-350">

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Bundle</span>
    <span class="na">xmlns=</span><span class="s">"http://hl7.org/fhir"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">"dd9724d1-7b61-44e2-9023-b72e6b966018-54446768443265458908"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">"searchset"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;total</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link&gt;</span>
        <span class="nt">&lt;relation</span> <span class="na">value=</span><span class="s">"self"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">"https://psis-sync.national.ncrs.nhs.uk/DocumentReference?subject=https%3A%2F%2Fdemographics.spineservices.nhs.uk%2FSTU3%2FPatient%2F9876543211"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/link&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
        <span class="nt">&lt;fullUrl</span> <span class="na">value=</span><span class="s">"https://psis-sync.national.ncrs.nhs.uk/DocumentReference/0353e505-f7be-4c20-8f4e-337e79a32c51-58778905432232112312"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;resource&gt;</span>
            <span class="nt">&lt;DocumentReference&gt;</span>
                <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">"0353e505-f7be-4c20-8f4e-337e79a32c51-58778905432232112312"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;meta&gt;</span>
                    <span class="nt">&lt;profile</span> <span class="na">value=</span><span class="s">"https://fhir.nhs.uk/STU3/StructureDefinition/NRL-DocumentReference-1"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;version</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;lastUpdated</span> <span class="na">value=</span><span class="s">"2016-03-08T15:26:00+01:00"</span><span class="nt">/&gt;</span> 
                <span class="nt">&lt;/meta&gt;</span>
                <span class="nt">&lt;masterIdentifier&gt;</span>
                    <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"urn:ietf:rfc:3986"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"urn:oid:1.3.6.1.4.1.21367.2005.3.11"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/masterIdentifier&gt;</span>
                <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">"current"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;type&gt;</span>
                    <span class="nt">&lt;coding&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://snomed.info/sct"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"736253002"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Mental health crisis plan"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/coding&gt;</span>
                <span class="nt">&lt;/type&gt;</span>
                <span class="nt">&lt;class&gt;</span>
                    <span class="nt">&lt;coding&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://snomed.info/sct"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"734163000"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Care plan"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/coding&gt;</span>
                <span class="nt">&lt;/class&gt;</span>
                <span class="nt">&lt;subject&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">"https://demographics.spineservices.nhs.uk/STU3/Patient/9876543211"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/subject&gt;</span>
                <span class="nt">&lt;indexed</span> <span class="na">value=</span><span class="s">"2018-07-01T15:26:01+01:00"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;author&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">"https://directory.spineservices.nhs.uk/STU3/Organization/RGD"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/author&gt;</span>
                <span class="nt">&lt;custodian&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">"https://directory.spineservices.nhs.uk/STU3/Organization/RR8"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/custodian&gt;</span>
                <span class="nt">&lt;content&gt;</span>
                    <span class="nt">&lt;attachment&gt;</span>
                        <span class="nt">&lt;contentType</span> <span class="na">value=</span><span class="s">"application/pdf"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">"https://p1.nhs.uk/MentalhealthCrisisTeam"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;creation</span> <span class="na">value=</span><span class="s">"2018-07-01T15:26:00+01:00"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/attachment&gt;</span>
                    <span class="nt">&lt;format&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"https://fhir.nhs.uk/STU3/CodeSystem/NRL-FormatCode-1"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"urn:nhs-ic:record-contact"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Contact details (HTTP Unsecured)"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/format&gt;</span>
                    <span class="nt">&lt;extension</span> <span class="na">url=</span><span class="s">"https://fhir.nhs.uk/STU3/StructureDefinition/Extension-NRL-ContentStability-1"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;valueCodeableConcept&gt;</span>
                            <span class="nt">&lt;coding&gt;</span>
                                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"https://fhir.nhs.uk/STU3/CodeSystem/NRL-ContentStability-1"</span><span class="nt">/&gt;</span>
                                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"static"</span><span class="nt">/&gt;</span>
                                <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Static"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;/coding&gt;</span>
                        <span class="nt">&lt;/valueCodeableConcept&gt;</span>
                    <span class="nt">&lt;/extension&gt;</span>
                <span class="nt">&lt;/content&gt;</span>
                <span class="nt">&lt;context&gt;</span>
                    <span class="nt">&lt;period&gt;</span>
                        <span class="nt">&lt;start</span> <span class="na">value=</span><span class="s">"2017-05-12T13:34:00+01:00"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/period&gt;</span>
                    <span class="nt">&lt;practiceSetting&gt;</span>
                        <span class="nt">&lt;coding&gt;</span>
                            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://snomed.info/sct"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"708168004"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Mental health service"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;/coding&gt;</span>
                    <span class="nt">&lt;/practiceSetting&gt;</span>
                <span class="nt">&lt;/context&gt;</span>
            <span class="nt">&lt;/DocumentReference&gt;</span>
        <span class="nt">&lt;/resource&gt;</span>
        <span class="nt">&lt;search&gt;</span>
            <span class="nt">&lt;mode</span> <span class="na">value=</span><span class="s">"match"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/search&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
        <span class="nt">&lt;fullUrl</span> <span class="na">value=</span><span class="s">"https://psis-sync.national.ncrs.nhs.uk/DocumentReference/5303c09e-de28-4622-9416-62ab0b22e15a-54598780989231213433"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;resource&gt;</span>
            <span class="nt">&lt;DocumentReference&gt;</span>
                <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">"5303c09e-de28-4622-9416-62ab0b22e15a-54598780989231213433"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;meta&gt;</span>
                    <span class="nt">&lt;profile</span> <span class="na">value=</span><span class="s">"https://fhir.nhs.uk/STU3/StructureDefinition/NRL-DocumentReference-1"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;version</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;lastUpdated</span> <span class="na">value=</span><span class="s">"2016-03-08T15:26:00+01:00"</span><span class="nt">/&gt;</span> 
                <span class="nt">&lt;/meta&gt;</span>
                <span class="nt">&lt;masterIdentifier&gt;</span>
                    <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"urn:ietf:rfc:3986"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"urn:oid:1.3.6.1.4.1.21367.2005.3.10"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/masterIdentifier&gt;</span>
                <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">"current"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;type&gt;</span>
                    <span class="nt">&lt;coding&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://snomed.info/sct"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"736253002"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Mental health crisis plan"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/coding&gt;</span>
                <span class="nt">&lt;/type&gt;</span>
                <span class="nt">&lt;class&gt;</span>
                    <span class="nt">&lt;coding&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://snomed.info/sct"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"734163000"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Care plan"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/coding&gt;</span>
                <span class="nt">&lt;/class&gt;</span>
                <span class="nt">&lt;subject&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">"https://demographics.spineservices.nhs.uk/STU3/Patient/9876543211"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/subject&gt;</span>
                <span class="nt">&lt;indexed</span> <span class="na">value=</span><span class="s">"2018-07-02T11:25:01+01:00"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;author&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">"https://directory.spineservices.nhs.uk/STU3/Organization/RGD"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/author&gt;</span>
                <span class="nt">&lt;custodian&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">"https://directory.spineservices.nhs.uk/STU3/Organization/RR8"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/custodian&gt;</span>
                <span class="nt">&lt;relatesTo&gt;</span>
                    <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"replaces"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;target&gt;</span>
                        <span class="nt">&lt;identifier&gt;</span>
                            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"urn:ietf:rfc:3986"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"urn:oid:1.3.6.1.4.1.21367.2005.3.9"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;/identifier&gt;</span>
                    <span class="nt">&lt;/target&gt;</span>
                <span class="nt">&lt;/relatesTo&gt;</span>
                <span class="nt">&lt;content&gt;</span>
                    <span class="nt">&lt;attachment&gt;</span>
                        <span class="nt">&lt;contentType</span> <span class="na">value=</span><span class="s">"application/pdf"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">"https://p1.nhs.uk/MentalhealthCrisisPlanReport.pdf"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;creation</span> <span class="na">value=</span><span class="s">"2016-03-08T15:26:00+01:00"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/attachment&gt;</span>
                    <span class="nt">&lt;format&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"https://fhir.nhs.uk/STU3/CodeSystem/NRL-FormatCode-1"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"urn:nhs-ic:unstructured"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Unstructured Document"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/format&gt;</span>
                    <span class="nt">&lt;extension</span> <span class="na">url=</span><span class="s">"https://fhir.nhs.uk/STU3/StructureDefinition/Extension-NRL-ContentStability-1"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;valueCodeableConcept&gt;</span>
                            <span class="nt">&lt;coding&gt;</span>
                                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"https://fhir.nhs.uk/STU3/CodeSystem/NRL-ContentStability-1"</span><span class="nt">/&gt;</span>
                                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"static"</span><span class="nt">/&gt;</span>
                                <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Static"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;/coding&gt;</span>
                        <span class="nt">&lt;/valueCodeableConcept&gt;</span>
                    <span class="nt">&lt;/extension&gt;</span>
                <span class="nt">&lt;/content&gt;</span>
                <span class="nt">&lt;context&gt;</span>
                    <span class="nt">&lt;period&gt;</span>
                        <span class="nt">&lt;start</span> <span class="na">value=</span><span class="s">"2016-03-07T13:34:00+01:00"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;end</span> <span class="na">value=</span><span class="s">"2017-02-13T14:11:00+01:00"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/period&gt;</span>
                    <span class="nt">&lt;practiceSetting&gt;</span>
                        <span class="nt">&lt;coding&gt;</span>
                            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://snomed.info/sct"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"708168004"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Mental health service"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;/coding&gt;</span>
                    <span class="nt">&lt;/practiceSetting&gt;</span>
                <span class="nt">&lt;/context&gt;</span>
            <span class="nt">&lt;/DocumentReference&gt;</span>
        <span class="nt">&lt;/resource&gt;</span>
        <span class="nt">&lt;search&gt;</span>
            <span class="nt">&lt;mode</span> <span class="na">value=</span><span class="s">"match"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/search&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
<span class="nt">&lt;/Bundle&gt;</span></code></pre></figure>

</div>

<h5 id="no-record-pointer-matched"><strong>No Record (Pointer) Matched:</strong></h5>

<ul>
  <li>HTTP 200-Request was successfully executed</li>
  <li>Empty bundle resource of type searchset containing a ‘0’ (zero) total value indicating no record was matched</li>
</ul>

<div class="github-sample-wrapper scroll-height-350">

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Bundle</span>
    <span class="na">xmlns=</span><span class="s">"http://hl7.org/fhir"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">"de258b7f-2f0b-4b41-afcb-964d9995fd4f-65447656980012115439"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">"searchset"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;total</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link&gt;</span>
        <span class="nt">&lt;relation</span> <span class="na">value=</span><span class="s">"self"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">"https://psis-sync.national.ncrs.nhs.uk/DocumentReference?subject=https%3A%2F%2Fdemographics.spineservices.nhs.uk%2FSTU3%2FPatient%2F9876543213"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/link&gt;</span>
<span class="nt">&lt;/Bundle&gt;</span></code></pre></figure>

</div>

<h5 id="error-response-operationoutcome-returned"><strong>Error Response (OperationOutcome) Returned:</strong></h5>

<ul>
  <li>HTTP 400-Bad Request. Invalid Parameter.</li>
  <li>OperationOutcome resource that conforms to the <a href="https://fhir.nhs.uk/STU3/StructureDefinition/Spine-OperationOutcome-1">‘Spine-OperationOutcome-1’</a> profile if the search cannot be executed (not that there is no match)</li>
</ul>

<div class="github-sample-wrapper scroll-height-350">

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;OperationOutcome</span>
    <span class="na">xmlns=</span><span class="s">"http://hl7.org/fhir"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">"5a4171ac-486e-11e8-9ffc-6c3be5a609f5-34326129638901216693"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;meta&gt;</span>
        <span class="nt">&lt;profile</span> <span class="na">value=</span><span class="s">"https://fhir.nhs.uk/STU3/StructureDefinition/Spine-OperationOutcome-1"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/meta&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">"error"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"invalid"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;details&gt;</span>
            <span class="nt">&lt;coding&gt;</span>
                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"https://fhir.nhs.uk/STU3/CodeSystem/Spine-ErrorOrWarningCode-1"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"INVALID_PARAMETER"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"Invalid parameter"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/coding&gt;</span>
        <span class="nt">&lt;/details&gt;</span>
        <span class="nt">&lt;diagnostics</span> <span class="na">value=</span><span class="s">"The given resource URL does not conform to the expected format - https://demographics.spineservices.nhs.uk/STU3/Patient/[NHS Number]"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
<span class="nt">&lt;/OperationOutcome&gt;</span></code></pre></figure>

</div>

<p>See the <a href="development_general_api_guidance.html#error-handling">general API guidance</a> for all HTTP Error response codes supported by the NRL.</p>

<h5 id="_summarycount-response"><strong><code class="highlighter-rouge">_summary=count</code> Response:</strong></h5>

<ul>
  <li>Response body MUST return a valid XML or JSON formatted Bundle of type searchset, containing a bundle that reports the 
total number of resources that match in Bundle.total, but with no entries, and no prev/next/last links. Note that the Bundle.total 
only include the total number of matching <code class="highlighter-rouge">DocumentReference</code>s.</li>
</ul>

<p>Examples</p>
<ul>
  <li>Three <code class="highlighter-rouge">DocumentReference</code>s exist for patient with NHS number passed into the search</li>
</ul>
<div class="github-sample-wrapper scroll-height-350">

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Bundle</span>
    <span class="na">xmlns=</span><span class="s">"http://hl7.org/fhir"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">"de258b7f-2f0b-4b41-afcb-964d9995fdf-98874345667801234356"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">"searchset"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;total</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link&gt;</span>
        <span class="nt">&lt;relation</span> <span class="na">value=</span><span class="s">"self"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">"https://psis-sync.national.ncrs.nhs.uk/DocumentReference?subject=https%3A%2F%2Fdemographics.spineservices.nhs.uk%2FSTU3%2FPatient%2F9876543214&amp;amp;_summary=count"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/link&gt;</span>
<span class="nt">&lt;/Bundle&gt;</span> </code></pre></figure>

</div>

<ul>
  <li>No <code class="highlighter-rouge">DocumentReference</code>s exist for patient with NHS number passed into the search</li>
</ul>
<div class="github-sample-wrapper scroll-height-350">

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Bundle</span>
    <span class="na">xmlns=</span><span class="s">"http://hl7.org/fhir"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">"de258b7f-2f0b-4b41-afcb-964d5995fd4f-16547321986190065387"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">"searchset"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;total</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link&gt;</span>
        <span class="nt">&lt;relation</span> <span class="na">value=</span><span class="s">"self"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">"https://psis-sync.national.ncrs.nhs.uk/DocumentReference?subject=https%3A%2F%2Fdemographics.spineservices.nhs.uk%2FSTU3%2FPatient%2F9876543213&amp;amp;_summary=count"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/link&gt;</span>
<span class="nt">&lt;/Bundle&gt;</span> </code></pre></figure>

</div>

<h2 id="code-examples">Code Examples</h2>

<h3 id="get-pointers-with-c">GET Pointers with C</h3>

<p>The following code samples are taken from the NRL Demonstrator application which has both Consumer and Provider client implementations built in. More information about the design solution can be found on the <a href="https://github.com/nhsconnect/nrls-reference-implementation/wiki">NRL Demonstrator Wiki</a></p>

<p>First we generate a base pointer request model that includes the patient’s NHS Number used for the subject parameter. 
The NHS Number is obtained through a stub PDS Trace performed within the Demonstrator Consumer system.</p>

<p>Then we call our DocumentReference service GetPointersBundle method which will build a GET command request and then start the call to the NRL API.</p>

<div class="github-sample-wrapper">
<div class="github-sample-reference">
  <div class="author-info">
    <a href="https://github.com/nhsconnect/nrls-reference-implementation/blob/d6e952bd1ee53988bb8005b3a27f3fe16355b3ab/Demonstrator/Demonstrator.Services/Service/Nrls/PointerService.cs#L34-L36">This Github Sample</a> is by <a href="https://github.com/nhsconnect">nhsconnect</a>
  </div>
  <div class="meta-info">
    Demonstrator/Demonstrator.Services/Service/Nrls/PointerService.cs#L34-L36 <a href="https://github.com/nhsconnect/nrls-reference-implementation/blob/d6e952bd1ee53988bb8005b3a27f3fe16355b3ab/Demonstrator/Demonstrator.Services/Service/Nrls/PointerService.cs#L34-L36">view</a> <a href="https://raw.githubusercontent.com/nhsconnect/nrls-reference-implementation/d6e952bd1ee53988bb8005b3a27f3fe16355b3ab/Demonstrator/Demonstrator.Services/Service/Nrls/PointerService.cs#L34-L36">raw</a>
  </div>
</div>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="kt">var</span> <span class="n">pointerRequest</span> <span class="p">=</span> <span class="n">NrlsPointerRequest</span><span class="p">.</span><span class="nf">Search</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">OrgCode</span><span class="p">,</span> <span class="n">request</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="n">request</span><span class="p">.</span><span class="n">Asid</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">pointerResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_docRefService</span><span class="p">.</span><span class="nf">GetPointersBundle</span><span class="p">(</span><span class="n">pointerRequest</span><span class="p">);</span></code></pre></figure>

</div>

<p>Once we have received pointers from the NRL when then look up the custodian (and author) organisation details using the ODS Code’s held within each pointer via a stub ODS lookup. We can then present actual organisation details to the end users.</p>

<p><b>Calling the NRL</b><br />
Using our GET command request model we create a connection to the NRL using HttpClient.</p>

<p>You can view the common connection code example <a href="connectioncode_example.html">here</a>.</p>

<p><b>Explore the NRL</b><br />
You can explore and test the NRL GET command using Swagger in the <a href="https://data.developer.nhs.uk/nrls-ri/index.html#/Nrls/searchPointers">NRL API Reference Implementation</a>.</p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> The code in these examples is standard C# v7.2 taken directly from the <a href="https://nrls.digital.nhs.uk">NRL Demonstrator</a> code.<br /><br />The official <b><a href="https://ewoutkramer.github.io/fhir-net-api/">.NET FHIR Library</a></b> is utilised to construct, test, parse, and serialize FHIR models with ease.</div>



    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="tags.html?tags=fhir" class="btn btn-default navbar-btn cursorNorm" role="button">fhir</a>
        
        
        
        <a href="tags.html?tags=pointers" class="btn btn-default navbar-btn cursorNorm" role="button">pointers</a>
        
        
        
        <a href="tags.html?tags=for_consumers" class="btn btn-default navbar-btn cursorNorm" role="button">for consumers</a>
        
        
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
                    <img class="pull-left" src="images/explanatoryline.png" alt="NHS Digital Explanatory Line"/>
                    <br/>
                    &copy;2020 NHS Digital<br />
                     Site last generated: Mar 30, 2020 <br />
                    6f68aaa672cc33d7cfbcf7b81b91ebc455b910a9<br/>
                    <br/>
                    <!-- OGL Licence -->
                    <div class="open-government-licence">
                        <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license" class="no_icon"><img src="images/licence/ogl-symbol-41px-retina-black.png"></img></a>
                        <p>All content is available under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license" class="no_icon">Open Government Licence v3.0</a>, except where otherwise stated</p>
                    </div>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99659472-1', 'auto');
  ga('send', 'pageview');

</script>

 


</body>

</html>
