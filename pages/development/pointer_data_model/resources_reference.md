---
title: FHIR Profile Reference
keywords: development reference
tags: [development,fhir]
sidebar: overview_sidebar
permalink: explore_reference.html
summary: Developer Cheat Sheet for the technical build of the NRL API.
---

The [NRL-DocumentReference-1](https://fhir.nhs.uk/STU3/StructureDefinition/NRL-DocumentReference-1) resource is the data model used for the pointers held on the NRL. This page outlines the population guidance for the pointer data model, referencing the associated FHIR resources and value sets.

## Identifiers

### Logical Identifier

Uniquely identifies the pointer within the NRL. Used by providers to supersede, update or delete pointers.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Pointer identifier | `id` | [id](http://hl7.org/fhir/stu3/datatypes.html#id) | 0..1 | *Assigned by the NRL at creation time.* |

**Additional Guidance**

The format of the pointer identifier (ID) is under the control of the NRL service and the client should not make assumptions about the structure of the identifier.

If the pointer was ever to be migrated to a different NRL service instance then it is possible that its ID might change to avoid clashes with pointers on the target NRL service.

### Master Identifier

The master identifier is an **optional** identifier generated by the provider; it can be thought of as a business identifier but must be unique within the boundary of the NRL.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Master identifier | `masterIdentifier` | [Identifier](http://hl7.org/fhir/stu3/datatypes.html#identifier) | 0..1 | *See below.* |
| | `masterIdentifier.system` | [uri](http://hl7.org/fhir/stu3/datatypes.html#uri) | 1..1 | The namespace for the identifier. This element is mandatory if `masterIdentifier` is included. |
| | `masterIdentifier.value` | [string](http://hl7.org/fhir/stu3/datatypes.html#string) | 1..1 | The unique value of the identifier. This element is mandatory if `masterIdentifier` is included. |

A unique master identifier **MUST** be used for each pointer:
- Once a master identifier has been used in the creation of a pointer, the same master identifier value MUST NOT be re-used with another pointer.
- 'Superseding' a pointer requires a new unique master identifier value to be used.
- Master identifiers from deleted pointers MUST NOT be used again for new or superseding pointers.

It is recommended that the scope of the master identifier's uniqueness extends beyond the NRL service, ideally as a globally unique business identifier using an [OID](https://www.hl7.org/oid/) or [UUID](https://www.ietf.org/rfc/rfc4122.txt); this is helpful in scenarios where provider merge, or where a migration of the NRL is required. In this case, the values for `system` and `value` should match the following pattern (see the [FHIR identifier registry](https://www.hl7.org/fhir/stu3/identifier-registry.html) for more details and the [FHIR specification](https://www.hl7.org/fhir/stu3/datatypes-examples.html#Identifier) for some examples):

|masterIdentifier.system|masterIdentifier.value|
|-|-|
| urn:ietf:rfc:3986 | OID: urn:oid:[oidValue]<br/>UUID: urn:uuid:[uuidValue] |

The NRL guarantees that no two pointers for the same patient (identified by NHS number) will have the same master identifier. It is the responsibility of the provider to ensure the master identifiers it creates are unique across all pointers for a patient (ideally all patients). Should a provider attempt to create a pointer with an identical master identifier to an existing pointer for the same patient, the request will be blocked.

### Patient

The patent's NHS Number to which the pointer relates. 

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Patient | `subject.reference` | [string](http://hl7.org/fhir/stu3/datatypes.html#string) | 1..1 | The NHS Number reference **MUST** follow the structure: `https://demographics.spineservices.nhs.uk/STU3/Patient/[nhsNumber]`. |

## Pointer Metadata

### FHIR Profile

The URI of the FHIR profile the resource conforms to, indicating the version of the pointer model.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Profile | `meta.profile` | [uri](http://hl7.org/fhir/stu3/datatypes.html#uri) | 1..1 | The value **MUST** be `https://fhir.nhs.uk/STU3/StructureDefinition/NRL-DocumentReference-1`. |

**Additional Guidance**

The FHIR profile which the pointer conforms to will be indicated in this metadata attribute to enable consumers to support the different versions of the pointer model. Major changes to the pointer model will be reflected in the NRL `DocumentReference` FHIR profile, using the naming convention `NRL-DocumentReference-[major_version]`. 

{% include note.html content="Pointers conforming to the NRLS-DocumentReference-1 profile will not have this attribute populated." %}

### Pointer Owner

ODS code for the pointer's owner organization.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Pointer owner | `custodian.reference` | [string](http://hl7.org/fhir/stu3/datatypes.html#string) | 1..1 | The organization reference **MUST** follow the structure: `https://directory.spineservices.nhs.uk/STU3/Organization/[ODS Code]`. |

<!--**Additional Guidance**
 TO DO - link between ODS code and permissions -->

### Pointer Status

The status of the pointer.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Pointer status | `status` | [code](http://hl7.org/fhir/stu3/datatypes.html#code) | 1..1 | All pointers created **MUST** have the status `current`.<br/>Pointers which have been superseded via the `supersede` interaction will have the `superseded` status.<br/>Pointers which have been marked as erroneous via the `update` interaction will have the `entered-in-error` status. |

**Additional Guidance**

Only pointers with the `current` status will be available to consumers. 

### Pointer Versioning

Metadata used to track the current version of a pointer.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Version | `meta.versionId` | [id](http://hl7.org/fhir/stu3/datatypes.html#id) | 0..1 | *Auto-populated by the NRL.*  Pointer version number. |
| Pointer indexed datetime | `indexed` | [instant](http://hl7.org/fhir/stu3/datatypes.html#instant) | 0..1 | *Auto-populated by the NRL.* The date and time the pointer was created. |
| Pointer last updated datetime | `meta.lastUpdated` | [instant](http://hl7.org/fhir/stu3/datatypes.html#instant) | 0..1 | *Auto-populated by the NRL.* The date and time the pointer was last updated. |

### Related Pointer

Relationship referencing the previous version of a pointer, which has been superseded. 

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Related Pointer | `relatesTo` | [BackboneElement](http://hl7.org/fhir/stu3/backboneelement.html) | 0..1 | |
| | `relatesTo.code` | [code](http://hl7.org/fhir/stu3/datatypes.html#code) | 1..1 | The type of relationship between the documents (pointers). This element is mandatory if `relatesTo` is included and the value **MUST** be `replaces`. |
| | `relatesTo.target.reference`<br />`relatesTo.target.identifier` | [string](http://hl7.org/fhir/stu3/datatypes.html#string)<br />[Identifier](http://hl7.org/fhir/stu3/datatypes.html#identifier) | 1..1 | The target of the relationship, denoted by a [literal reference](https://www.hl7.org/fhir/references.html#literal) **or** [logical identifier](https://www.hl7.org/fhir/references.html#logical) to the target `DocumentReference` held within the NRL.<br /><br />Only one of these values should be populated. |

**Additional Guidance**

For further detail on superseding a pointer, see the [Supersede interaction page](api_interaction_supersede.html).

## Information Metadata

### Information Category

A high-level category of the information, from a set of supported categories.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Information category | `class` | [CodeableConcept](http://hl7.org/fhir/stu3/datatypes.html#codeableconcept) | 1..1 | The category will be one of a controlled value set. It will not be possible to create a pointer with a category that does not exist within this controlled set. |
| | `class.coding.system` | [uri](http://hl7.org/fhir/stu3/datatypes.html#uri) | 1..1 | Identity of the terminology system. |
| | `class.coding.code` | [code](http://hl7.org/fhir/stu3/datatypes.html#code) | 1..1 | Symbol in syntax defined by the system. |
| | `class.coding.display` | [string](http://hl7.org/fhir/stu3/datatypes.html#string) | 1..1 | Representation defined by the system. Display values **MUST** be as listed in the value set and are case sensitive. |

**Additional Guidance - Value Set** 

The information category **MUST** be a value included in the following value set:
- FHIR Value Set - [NRL-RecordClass-1](https://fhir.nhs.uk/STU3/ValueSet/NRL-RecordClass-1)

### Information Type

The clinical type of the information. Used to support searching to allow consumers to make sense of search results containing many pointers. 

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Information type | `type` | [CodeableConcept](http://hl7.org/fhir/stu3/datatypes.html#codeableconcept) | 1..1 | The type will be one of a controlled value set. It will not be possible to create a pointer with a type that does not exist within this controlled set. |
| | `type.coding.system` | [uri](http://hl7.org/fhir/stu3/datatypes.html#uri) | 1..1 | Identity of the terminology system. Example value: `http://snomed.info/sct`. |
| | `type.coding.code` | [code](http://hl7.org/fhir/stu3/datatypes.html#code) | 1..1 | Symbol in syntax defined by the system. Example value: `736253002`. |
| | `type.coding.display` | [string](http://hl7.org/fhir/stu3/datatypes.html#string) | 1..1 | Representation defined by the system. Display values **MUST** be as listed in the value set and are case sensitive. |

**Additional Guidance - Value Set** 

The information type **MUST** be a value included in the following value set:
- FHIR Value Set - [NRL-RecordType-1](https://fhir.nhs.uk/STU3/ValueSet/NRL-RecordType-1)

For further information on which types are supported, see the [Supported Pointer Types page](supported_pointer_types.html).

### Clinical Setting

Describes the clinical setting in which the information was recorded. 

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Clinical setting | `context.practiceSetting` | [CodeableConcept](http://hl7.org/fhir/stu3/datatypes.html#codeableconcept) | 1..1 | The clinical setting will be one of a controlled value set. It will not be possible to create a pointer with a clinical setting that does not exist within this controlled set. |
| | `context.practiceSetting.coding.system` | [uri](http://hl7.org/fhir/stu3/datatypes.html#uri) | 1..1 | Identity of the terminology system. |
| | `context.practiceSetting.coding.code` | [code](http://hl7.org/fhir/stu3/datatypes.html#code) | 1..1 | Symbol in syntax defined by the system. |
| | `context.practiceSetting.coding.display` | [string](http://hl7.org/fhir/stu3/datatypes.html#string) | 1..1 | Representation defined by the system. The display value **MUST** be the preferred term and one of the synonyms for the concept, not the Fully Specified Name, as described in the [FHIR guidance for usage of SNOMED CT](https://www.hl7.org/fhir/STU3/snomedct.html). Display values are case sensitive and **MUST** only have the first word capitalised. |

**Additional Guidance - Value Set** 

The clinical setting **MUST** be a value included in the following value set:
- FHIR Value Set - [NRL-PracticeSetting-1](https://fhir.nhs.uk/STU3/ValueSet/NRL-PracticeSetting-1)

Note that this value set refers to a SNOMED CT reference set. All SNOMED CT concepts that are members of this reference set are valid clinical setting codes.

### Information Owner

ODS code for the information owner organization. 

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Information owner | `author.reference` | [string](http://hl7.org/fhir/stu3/datatypes.html#string) | 1..1 | The organization reference **MUST** follow the structure: `https://directory.spineservices.nhs.uk/STU3/Organization/[ODS Code]`. |

<!-- **Additional Guidance**
 TO DO - link between ODS code and endpoint registration -->

### Period

Optional information detailing the period the record is/was active.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Period of care | `context.period` | [Period](http://hl7.org/fhir/stu3/datatypes.html#period) | 0..1 | Where this property is included, the start date **MUST** be populated. |
| | `context.period.start` | [dateTime](http://hl7.org/fhir/stu3/datatypes.html#datetime) | 1..1 | Starting time with inclusive boundary. |
| | `context.period.end` | [dateTime](http://hl7.org/fhir/stu3/datatypes.html#datetime) | 0..1 | End time with inclusive boundary, if not ongoing. |

### Information Creation Date

The date and time (on the provider's system) that the information was created, for static records.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Information creation datetime | `content.attachment.creation` | [dateTime](http://hl7.org/fhir/stu3/datatypes.html#datetime) | 0..1 | The date and time (on the provider's system) that the information was created, for static records. |

**Additional Guidance**

The information creation date is specific to each format of the record that is referenced on the pointer. Where the creation date is included and multiple formats are referenced, the creation date must be set for each individual format.

## Retrieval Information

### Retrieval URL

Absolute URL for the location of the information on the provider's system and/or a service that allows you to look up information based on the provider url, e.g. a web page with service contact details.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Retrieval URL | `content.attachment.url` | [uri](http://hl7.org/fhir/stu3/datatypes.html#uri) | 1..1 | Where retrieval of the record is facilitated by the SSP, the record URL on the pointer **MUST NOT** include the SSP base URL. |

### Retrieval Format

Describes the technical structure and rules of the information such that the consumer can pick an appropriate mechanism to handle the retrieved information.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Retrieval format | `content.format` | [Coding](http://hl7.org/fhir/stu3/datatypes.html#coding) | 1..1 | The information will be one of a controlled value set. It will not be possible to create a pointer with an information format that does not exist within this controlled set. |
| | `content.format.system` | [uri](http://hl7.org/fhir/stu3/datatypes.html#uri) | 1..1 | Identity of the terminology system. |
| | `content.format.code` | [code](http://hl7.org/fhir/stu3/datatypes.html#code) | 1..1 | Symbol in syntax defined by the system. |
| | `content.format.display` | [string](http://hl7.org/fhir/stu3/datatypes.html#string) | 1..1 | Representation defined by the system. |

**Additional Guidance - Value Set** 

The information format **MUST** be a value included in the following value sets:
- FHIR Value Set - [NRL-FormatCode-1](https://fhir.nhs.uk/STU3/ValueSet/NRL-FormatCode-1)
- FHIR Code System - [NRL-FormatCode-1](https://fhir.nhs.uk/STU3/CodeSystem/NRL-FormatCode-1)

For further information on which formats are supported, see the [Supported Formats](retrieval_overview.html#supported-formats) on the Information Retrieval Overview page.

### Retrieval MIME Type

Describes the type of data such that the consumer can pick an appropriate mechanism to handle the information.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Retrieval MIME type | `content.attachment.contentType` | [code](http://hl7.org/fhir/stu3/datatypes.html#code) | 1..1 | The MIME type of the content available at the `content.attachment.url` (e.g. [unstructured document supported MIME types](retreival_unstructured_document.html#content-type).)<br /><br />Where more than one data format is available for the content, there will be multiple `content` entries, one for each MIME type (which may share the same URL). |

### Information Stability

Describes whether the information content at the time of the request is dynamically generated or is static.

|Data Item|[FHIRPath](https://hl7.org/fhirpath/)|Data Type|Cardinality|Population Guidance|
|----|---------|----|-----------|-----|
| Information Stability | `content.extension:contentStability` | [Extension](http://hl7.org/fhir/stu3/extensibility.html#Extension) | 1..1 | Information stability extension. |
| | `content.extension:contentStability`<br/>`.url` | [uri](http://hl7.org/fhir/stu3/datatypes.html#uri) | 1..1 | Identifies the meaning of the extension. The value **MUST** be `https://fhir.nhs.uk/STU3/StructureDefinition/Extension-NRL-ContentStability-1`. |
| | `content.extension:contentStability`<br/>`.valueCodeableConcept` | [CodeableConcept](http://hl7.org/fhir/stu3/datatypes.html#codeableconcept) | 1..1 |  |
| | `content.extension:contentStability`<br/>`.valueCodeableConcept.coding.system` | [uri](http://hl7.org/fhir/stu3/datatypes.html#uri) | 1..1 | Identity of the terminology system. |
| | `content.extension:contentStability`<br/>`.valueCodeableConcept.coding.code` | [code](http://hl7.org/fhir/stu3/datatypes.html#code) | 1..1 | Symbol in syntax defined by the system. |
| | `content.extension:contentStability`<br/>`.valueCodeableConcept.coding.display` | [string](http://hl7.org/fhir/stu3/datatypes.html#string) | 1..1 | Representation defined by the system. |

**Additional Guidance - Extension and Value Set**

An extension is used to represent the information stability. The information stability MUST be a value included in the value set:
- FHIR Extension - [Extension-NRL-ContentStability-1](https://fhir.nhs.uk/STU3/StructureDefinition/Extension-NRL-ContentStability-1)
- FHIR Value Set - [NRL-RecordType-1](https://fhir.nhs.uk/STU3/ValueSet/NRL-RecordType-1)
- FHIR Code System - [NRL-ContentStability-1](https://fhir.nhs.uk/STU3/CodeSystem/NRL-ContentStability-1)

## Examples

### JSON Example

A JSON example of a `DocumentReference` resource is displayed below:

<div class="github-sample-wrapper scroll-height-350">
{% highlight json %}
{% include /examples/create_documentreference_resource.json  %}
{% endhighlight %}
</div>

### XML Example

An XML example of a `DocumentReference` resource is displayed below:

<div class="github-sample-wrapper scroll-height-350">
{% highlight xml %}
{% include /examples/create_documentreference_resource.xml  %}
{% endhighlight %}
</div>
